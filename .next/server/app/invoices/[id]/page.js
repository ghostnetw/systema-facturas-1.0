(()=>{var e={};e.id=783,e.ids=[783],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6419:(e,s,i)=>{Promise.resolve().then(i.bind(i,94506))},7111:(e,s,i)=>{"use strict";i.d(s,{b:()=>o});var t=i(13072),r=i(10904),a=i(45781),d="horizontal",n=["horizontal","vertical"],l=t.forwardRef((e,s)=>{var i;let{decorative:t,orientation:l=d,...o}=e,c=(i=l,n.includes(i))?l:d;return(0,a.jsx)(r.sG.div,{"data-orientation":c,...t?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:s})});l.displayName="Separator";var o=l},8086:e=>{"use strict";e.exports=require("module")},8167:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(22752).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24436:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(22752).A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40389:(e,s,i)=>{"use strict";i.r(s),i.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o});var t=i(7025),r=i(18198),a=i(82576),d=i.n(a),n=i(45239),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);i.d(s,l);let o={children:["",{children:["invoices",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,79364)),"C:\\Users\\admin\\Downloads\\facturacion\\app\\invoices\\[id]\\page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(i.bind(i,94361)),"C:\\Users\\admin\\Downloads\\facturacion\\app\\invoices\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,59650)),"C:\\Users\\admin\\Downloads\\facturacion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,4540,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,53117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,6874,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\admin\\Downloads\\facturacion\\app\\invoices\\[id]\\page.tsx"],x={require:i,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/invoices/[id]/page",pathname:"/invoices/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},53275:(e,s,i)=>{Promise.resolve().then(i.bind(i,79364))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73583:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(22752).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},79364:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>t});let t=(0,i(51129).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\admin\\\\Downloads\\\\facturacion\\\\app\\\\invoices\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\admin\\Downloads\\facturacion\\app\\invoices\\[id]\\page.tsx","default")},84401:(e,s,i)=>{"use strict";i.d(s,{w:()=>n});var t=i(45781),r=i(13072),a=i(7111),d=i(77401);let n=r.forwardRef(({className:e,orientation:s="horizontal",decorative:i=!0,...r},n)=>(0,t.jsx)(a.b,{ref:n,decorative:i,orientation:s,className:(0,d.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));n.displayName=a.b.displayName},94506:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>w});var t=i(45781),r=i(13072),a=i(7439),d=i(5469),n=i(44238),l=i(14784),o=i(99192),c=i(59173),x=i(84401),h=i(73583),m=i(24436),p=i(758),u=i(8167),v=i(41225),j=i(28328),f=i.n(j),g=i(52127),b=i(15953),N=i(8629),y=i(39513);function w(){(0,a.useParams)();let e=(0,a.useRouter)(),{invoices:s,deleteInvoice:i,getInvoiceById:j}=(0,d.U)(),[w,A]=(0,r.useState)(null),[C,P]=(0,r.useState)(!0);return C?(0,t.jsx)(g.b,{children:(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(n.$,{variant:"outline",size:"icon",asChild:!0,children:(0,t.jsx)(f(),{href:"/invoices",children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Cargando factura..."})]})})}):w?(0,t.jsx)(g.b,{children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(n.$,{variant:"outline",size:"icon",asChild:!0,children:(0,t.jsx)(f(),{href:"/invoices",children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})}),(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:["Factura ",w.id]}),(0,t.jsx)(c.E,{variant:"Pagada"===w.status?"success":"Pendiente"===w.status?"outline":"destructive",className:"Pagada"===w.status?"bg-green-100 text-green-800 hover:bg-green-100":"Pendiente"===w.status?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100":"bg-red-100 text-red-800 hover:bg-red-100",children:w.status})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{if(w)try{let e=window.open("","_blank");if(!e){(0,N.o)({title:"Error",description:"No se pudo abrir la ventana de impresi\xf3n. Comprueba que no est\xe9 bloqueada por el navegador.",variant:"destructive"});return}e.document.write(`
          <html>
            <head>
              <title>Factura ${w.id}</title>
              <style>
                body { font-family: Arial, sans-serif; margin: 20px; }
                .header { display: flex; justify-content: space-between; margin-bottom: 30px; }
                .company { font-size: 24px; font-weight: bold; }
                .invoice-info { text-align: right; }
                .client-info { margin-bottom: 30px; }
                table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
                th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                th { background-color: #f2f2f2; }
                .totals { text-align: right; margin-bottom: 30px; }
                .total { font-weight: bold; font-size: 18px; }
                .footer { margin-top: 50px; font-size: 12px; text-align: center; color: #666; }
              </style>
            </head>
            <body>
              <div class="header">
                <div>
                  <div class="company">RESINA ROSARIO, S.L.</div>
                  <div>CIF: B12345678</div>
                  <div>Calle Ejemplo, 123</div>
                  <div>28001 Madrid</div>
                </div>
                <div class="invoice-info">
                  <div><strong>Factura:</strong> ${w.id}</div>
                  <div><strong>Fecha:</strong> ${w.date}</div>
                  <div><strong>Vencimiento:</strong> ${w.dueDate}</div>
                  <div><strong>Estado:</strong> ${w.status}</div>
                </div>
              </div>
              
              <div class="client-info">
                <h3>Cliente:</h3>
                <div>${w.client}</div>
                <div>CIF: ${w.cif}</div>
              </div>
              
              <h3>Conceptos:</h3>
              <table>
                <thead>
                  <tr>
                    <th>Descripci\xf3n</th>
                    <th>Precio (€)</th>
                    <th>IVA (%)</th>
                    <th>Total (€)</th>
                  </tr>
                </thead>
                <tbody>
                  ${w.items?w.items.map(e=>`
                      <tr>
                        <td>${e.description}</td>
                        <td>${e.price.toFixed(2)}</td>
                        <td>${e.tax}%</td>
                        <td>${(e.price*(1+e.tax/100)).toFixed(2)}</td>
                      </tr>
                    `).join(""):`<tr>
                      <td colspan="4">No hay conceptos disponibles</td>
                    </tr>`}
                </tbody>
              </table>
              
              <div class="totals">
                <div>Base Imponible: ${w.amount}</div>
                <div>IVA: ${w.tax}</div>
                <div class="total">Total: ${w.total}</div>
              </div>
              
              <div>
                <div>Forma de pago: Transferencia Bancaria</div>
                <div>IBAN: ES12 3456 7890 1234 5678 9012</div>
              </div>
              
              <div class="footer">
                Gracias por confiar en RESINA ROSARIO, S.L.
              </div>
            </body>
          </html>
        `),e.document.close(),e.focus(),setTimeout(()=>{e.print()},500)}catch(e){console.error("Error al imprimir:",e),(0,N.o)({title:"Error",description:"Ha ocurrido un error al preparar la impresi\xf3n.",variant:"destructive"})}},children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Imprimir"]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{if(w)try{(0,y.E)(w),(0,N.o)({title:"PDF generado",description:`La factura ${w.id} se ha descargado correctamente.`})}catch(e){console.error("Error al generar el PDF:",e),(0,N.o)({title:"Error",description:"Ha ocurrido un error al generar el PDF.",variant:"destructive"})}},children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Descargar PDF"]}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)(f(),{href:`/invoices/${w.id}/edit`,children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Editar"]})}),(0,t.jsxs)(b.Lt,{children:[(0,t.jsx)(b.tv,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"destructive",size:"sm",children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Eliminar"]})}),(0,t.jsxs)(b.EO,{children:[(0,t.jsxs)(b.wd,{children:[(0,t.jsx)(b.r7,{children:"\xbfEst\xe1s seguro?"}),(0,t.jsxs)(b.$v,{children:["Esta acci\xf3n no se puede deshacer. Esto eliminar\xe1 permanentemente la factura ",w.id," y no podr\xe1 ser recuperada."]})]}),(0,t.jsxs)(b.ck,{children:[(0,t.jsx)(b.Zr,{children:"Cancelar"}),(0,t.jsx)(b.Rx,{onClick:()=>{w&&(i(w.id),(0,N.o)({title:"Factura eliminada",description:`La factura ${w.id} ha sido eliminada correctamente.`}),e.push("/invoices"))},className:"bg-red-600 hover:bg-red-700",children:"Eliminar"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Datos de Facturaci\xf3n"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium",children:"Datos de tu empresa"}),(0,t.jsxs)("div",{className:"rounded-md border p-4 bg-gray-50",children:[(0,t.jsx)("p",{className:"font-medium",children:"RESINA ROSARIO, S.L."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"CIF: B12345678"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Calle Ejemplo, 123"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"28001 Madrid"})]})]}),(0,t.jsx)(x.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium",children:"Datos del cliente"}),(0,t.jsxs)("div",{className:"rounded-md border p-4 bg-gray-50",children:[(0,t.jsx)("p",{className:"font-medium",children:w.client}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["CIF: ",w.cif]})]})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Detalles de la Factura"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"N\xfamero de Factura"}),(0,t.jsx)("p",{children:w.id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Fecha de Emisi\xf3n"}),(0,t.jsx)("p",{children:w.date})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Fecha de Vencimiento"}),(0,t.jsx)("p",{children:w.dueDate})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Estado"}),(0,t.jsx)(c.E,{variant:"Pagada"===w.status?"success":"Pendiente"===w.status?"outline":"destructive",className:"Pagada"===w.status?"bg-green-100 text-green-800 hover:bg-green-100":"Pendiente"===w.status?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100":"bg-red-100 text-red-800 hover:bg-red-100",children:w.status})]})]})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Conceptos"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{className:"w-[60%]",children:"Descripci\xf3n"}),(0,t.jsx)(o.nd,{children:"Precio (€)"}),(0,t.jsx)(o.nd,{children:"IVA (%)"}),(0,t.jsx)(o.nd,{children:"Total"})]})}),(0,t.jsx)(o.BF,{children:w.items?w.items.map(e=>{let s=e.price,i=e.tax;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nA,{children:e.description}),(0,t.jsxs)(o.nA,{children:["€",s.toFixed(2)]}),(0,t.jsxs)(o.nA,{children:[i,"%"]}),(0,t.jsxs)(o.nA,{className:"font-medium",children:["€",(s*(1+i/100)).toFixed(2)]})]},e.id)}):(0,t.jsx)(o.Hj,{children:(0,t.jsx)(o.nA,{colSpan:4,className:"text-center",children:"No hay conceptos disponibles"})})})]})})}),(0,t.jsxs)(l.wL,{className:"flex justify-between",children:[(0,t.jsx)("div",{}),(0,t.jsxs)("div",{className:"space-y-2 text-right",children:[(0,t.jsxs)("div",{className:"text-sm",children:["Subtotal: ",(0,t.jsx)("span",{className:"font-medium",children:w.amount})]}),(0,t.jsxs)("div",{className:"text-sm",children:["IVA: ",(0,t.jsx)("span",{className:"font-medium",children:w.tax})]}),(0,t.jsxs)("div",{className:"text-lg font-bold",children:["Total: ",w.total]})]})]})]})]})}):(0,t.jsx)(g.b,{children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(n.$,{variant:"outline",size:"icon",asChild:!0,children:(0,t.jsx)(f(),{href:"/invoices",children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Factura no encontrada"})]}),(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.Wu,{className:"pt-6",children:[(0,t.jsx)("p",{children:"La factura que est\xe1s buscando no existe o ha sido eliminada."}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(n.$,{asChild:!0,children:(0,t.jsx)(f(),{href:"/invoices",children:"Volver a facturas"})})})]})})]})})}}};var s=require("../../../webpack-runtime.js");s.C(e);var i=e=>s(s.s=e),t=s.X(0,[550,328,735,389,904,593,901],()=>i(40389));module.exports=t})();
(()=>{var e={};e.id=22,e.ids=[22],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16749:(e,s,t)=>{"use strict";t.d(s,{G:()=>u});var r=t(60687),a=t(55192),n=t(48482),i=t(29821),l=t(27747),d=t(9920),c=t(38246),o=t(42139),x=t(27553),m=t(59402);function u(){let{invoices:e,budgets:s}=(0,x.U)();if((!e||0===e.length)&&(!s||0===s.length))return(0,r.jsx)(a.Zp,{children:(0,r.jsxs)(a.Wu,{className:"p-6 flex flex-col items-center justify-center min-h-[350px]",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-muted-foreground mb-2",children:"No hay datos disponibles"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Los datos de facturaci\xf3n se mostrar\xe1n aqu\xed cuando comiences a crear facturas."})]})});let t=Array.from({length:12},(e,s)=>new Date(2024,s,1).toLocaleString("es-ES",{month:"short"})),u=Object.entries(e.reduce((e,s)=>{let t=new Date(s.date).toLocaleString("es-ES",{month:"short"});t in e||(e[t]=0);let r="string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0;return e[t]+=r,e},Object.fromEntries(t.map(e=>[e,0])))).map(([e,s])=>({name:e,total:s})),h=s?.length||0,p=s?.filter(e=>"Aceptado"===e.status).length||0,f=s?.filter(e=>"Pendiente"===e.status).length||0;return(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsx)(a.Zp,{children:(0,r.jsxs)(a.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-xl font-bold",children:"Estado de Presupuestos"})]}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-gray-100 p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:h}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Total"})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-green-100 p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-800",children:p}),(0,r.jsx)("div",{className:"text-sm text-green-800",children:"Aceptados"})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-yellow-100 p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:f}),(0,r.jsx)("div",{className:"text-sm text-yellow-800",children:"Pendientes"})]})]})]})}),(0,r.jsx)(a.Zp,{children:(0,r.jsxs)(a.Wu,{className:"p-6",children:[(0,r.jsx)("div",{className:"text-xl font-bold mb-4",children:"Facturaci\xf3n Mensual"}),(0,r.jsx)(n.u,{width:"100%",height:350,children:(0,r.jsxs)(i.E,{data:u,children:[(0,r.jsx)(l.W,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,r.jsx)(d.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`€${e}`}),(0,r.jsx)(c.m,{formatter:e=>[`€${e}`,"Total"],labelFormatter:e=>`Mes: ${e}`}),(0,r.jsx)(o.y,{dataKey:"total",fill:"#4f46e5",radius:[4,4,0,0]})]})})]})})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21587:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=t(65239),a=t(48088),n=t(88170),i=t.n(n),l=t(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c={children:["",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,94149)),"C:\\Users\\admin\\Desktop\\facturaciondev2.0\\facturacion2.0\\app\\reports\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"C:\\Users\\admin\\Desktop\\facturaciondev2.0\\facturacion2.0\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["C:\\Users\\admin\\Desktop\\facturaciondev2.0\\facturacion2.0\\app\\reports\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/reports/page",pathname:"/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},24934:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>d});var r=t(60687),a=t(43210),n=t(8730),i=t(24224),l=t(96241);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...i},c)=>{let o=a?n.DX:"button";return(0,r.jsx)(o,{className:(0,l.cn)(d({variant:s,size:t,className:e})),ref:c,...i})});c.displayName="Button"},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},33873:e=>{"use strict";e.exports=require("path")},34494:(e,s,t)=>{Promise.resolve().then(t.bind(t,94149))},46428:(e,s,t)=>{"use strict";t.d(s,{Y:()=>o});var r=t(60687),a=t(85814),n=t.n(a),i=t(24934),l=t(10022),d=t(41312),c=t(84027);function o(){return(0,r.jsxs)("header",{className:"sticky top-0 z-10 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6",children:[(0,r.jsx)("div",{className:"flex flex-1 items-center gap-2",children:(0,r.jsx)(n(),{href:"/",className:"text-xl font-semibold md:hidden",children:"RESINA ROSARIO, S.L."})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"hidden md:flex md:gap-2",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(n(),{href:"/invoices",children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Facturas"]})}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(n(),{href:"/clients",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Clientes"]})})]}),(0,r.jsx)(i.$,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(n(),{href:"/settings",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Configuraci\xf3n"]})}),(0,r.jsx)(i.$,{size:"sm",asChild:!0,children:(0,r.jsx)(n(),{href:"/invoices/new",children:"Nueva Factura"})})]})]})}},55192:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>x});var r=t(60687),a=t(43210),n=t(96241);let i=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let l=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));c.displayName="CardDescription";let o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let x=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s}));x.displayName="CardFooter"},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74662:(e,s,t)=>{Promise.resolve().then(t.bind(t,94827))},83544:(e,s,t)=>{"use strict";t.d(s,{b:()=>p});var r=t(60687),a=t(46428),n=t(85814),i=t.n(n),l=t(16189),d=t(32192),c=t(59402),o=t(10022),x=t(41312),m=t(53411),u=t(84027);function h(){let e=(0,l.usePathname)(),s=s=>!!("/"===s&&"/"===e||"/"!==s&&e.startsWith(s));return(0,r.jsx)("div",{className:"hidden border-r bg-gray-50/40 md:block md:w-64",children:(0,r.jsxs)("div",{className:"flex h-full flex-col gap-2 p-4",children:[(0,r.jsx)("div",{className:"flex h-14 items-center border-b px-4 font-semibold",children:"RESINA ROSARIO, S.L."}),(0,r.jsxs)("nav",{className:"grid gap-1 px-2 pt-2",children:[(0,r.jsxs)(i(),{href:"/",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 ${s("/")?"bg-gray-100 text-gray-900":""}`,children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Dashboard"]}),(0,r.jsxs)(i(),{href:"/budgets",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 ${s("/budgets")?"bg-gray-100 text-gray-900":""}`,children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),"Presupuestos"]}),(0,r.jsxs)(i(),{href:"/invoices",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 ${s("/invoices")?"bg-gray-100 text-gray-900":""}`,children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),"Facturas"]}),(0,r.jsxs)(i(),{href:"/clients",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 ${s("/clients")?"bg-gray-100 text-gray-900":""}`,children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),"Clientes"]}),(0,r.jsxs)(i(),{href:"/reports",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 ${s("/reports")?"bg-gray-100 text-gray-900":""}`,children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),"Informes"]}),(0,r.jsxs)(i(),{href:"/settings",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 ${s("/settings")?"bg-gray-100 text-gray-900":""}`,children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),"Configuraci\xf3n"]}),(0,r.jsxs)(i(),{href:"/login",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 ${s("/login")?"bg-gray-100 text-gray-900":""}`,children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Login"]})]})]})})}function p({children:e}){return(0,r.jsxs)("div",{className:"flex min-h-screen w-full flex-col",children:[(0,r.jsx)(a.Y,{}),(0,r.jsxs)("div",{className:"flex flex-1",children:[(0,r.jsx)(h,{}),(0,r.jsx)("main",{className:"flex-1",children:e})]})]})}},94149:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\admin\\\\Desktop\\\\facturaciondev2.0\\\\facturacion2.0\\\\app\\\\reports\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\admin\\Desktop\\facturaciondev2.0\\facturacion2.0\\app\\reports\\page.tsx","default")},94827:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(60687),a=t(31158),n=t(10022),i=t(53411),l=t(24934),d=t(55192),c=t(16749),o=t(83544),x=t(27553);function m(){let{invoices:e,clients:s}=(0,x.U)(),t=e?.length||0,m=e?.reduce((e,s)=>e+("string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0),0)||0,u=e?.filter(e=>"Pendiente"===e.status)||[],h=u.reduce((e,s)=>e+("string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0),0),p=e?.filter(e=>"Pagada"===e.status&&e.date)||[],f=p.length>0?Math.round(p.reduce((e,s)=>{if(!s.date)return e;let t=new Date(s.date);return e+Math.max(0,((s.dueDate?new Date(s.dueDate):new Date).getTime()-t.getTime())/864e5)},0)/p.length):0;return(0,r.jsx)(o.b,{children:(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Informes y Estad\xedsticas"}),(0,r.jsxs)(l.$,{variant:"outline",children:[(0,r.jsx)(a.A,{className:"mr-2 h-4 w-4"}),"Exportar Datos"]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Facturas"}),(0,r.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Facturas emitidas"})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-sm font-medium",children:"Facturaci\xf3n Total"}),(0,r.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["€",m.toFixed(2)]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total facturado"})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-sm font-medium",children:"Facturas Pendientes"}),(0,r.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["€",h.toFixed(2)]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[u.length," facturas sin cobrar"]})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-sm font-medium",children:"Tiempo Medio de Pago"}),(0,r.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[f," d\xedas"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Promedio de cobro"})]})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Facturaci\xf3n Mensual"}),(0,r.jsx)(d.BT,{children:"Evoluci\xf3n de la facturaci\xf3n durante el \xfaltimo a\xf1o"})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(c.G,{})})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Facturaci\xf3n por Cliente"}),(0,r.jsx)(d.BT,{children:"Top 5 clientes por volumen de facturaci\xf3n"})]}),(0,r.jsx)(d.Wu,{className:"space-y-8",children:(s||[]).map(s=>({...s,total:(e||[]).filter(e=>e.client?.toString()===s.id?.toString()).reduce((e,s)=>e+("string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0),0)})).sort((e,s)=>s.total-e.total).slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]}),(0,r.jsxs)("div",{className:"text-sm font-medium",children:["€",e.total.toFixed(2)]})]},e.id))})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Estado de Pagos"}),(0,r.jsx)(d.BT,{children:"Distribuci\xf3n de facturas por estado"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Facturas Pagadas"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[p.length," de ",t," facturas"]})]}),(0,r.jsxs)("div",{className:"text-sm font-medium",children:[t>0?(p.length/t*100).toFixed(1):"0.0","%"]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Facturas Pendientes"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[u.length," de ",t," facturas"]})]}),(0,r.jsxs)("div",{className:"text-sm font-medium",children:[t>0?(u.length/t*100).toFixed(1):"0.0","%"]})]})]})]})]})]})})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,840,814,546,918],()=>t(21587));module.exports=r})();
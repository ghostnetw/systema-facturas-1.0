(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{381:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6740:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},12231:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var i=a(95155),s=a(97168),l=a(88482),r=a(89852),n=a(82714),d=a(99474),c=a(42181),o=a(12115),u=a(35695),p=a(56671),h=a(77229),m=a(35169),x=a(6874),v=a.n(x);function f(e){let{params:t}=e,a=(0,u.useRouter)(),{clients:x,getBudgetById:f,updateBudget:y}=(0,c.U)(),[b,g]=(0,o.useState)({client:"",date:new Date().toISOString().split("T")[0],validUntil:"",items:[{id:1,description:"",quantity:1,price:0,tax:21}],notes:""});(0,o.useEffect)(()=>{let e=f(t.id);if(e){let t=x.find(t=>t.name===e.client);g({client:t?t.id.toString():"",date:e.date,validUntil:e.validUntil,items:e.items||[{id:1,description:"",quantity:1,price:0,tax:21}],notes:e.notes||""})}else p.oR.error("Presupuesto no encontrado"),a.push("/budgets")},[t.id,f,x]);let j=async e=>{e.preventDefault();try{let e=x.find(e=>e.id.toString()===b.client);if(!e){p.oR.error("Cliente no seleccionado");return}let i=b.items.reduce((e,t)=>e+t.quantity*t.price,0),s=b.items.reduce((e,t)=>e+t.quantity*t.price*t.tax/100,0),l=i+s,r={client:e.name,cif:e.cif,amount:i.toFixed(2),tax:s.toFixed(2),total:l.toFixed(2),validUntil:new Date(b.validUntil).toLocaleDateString("es-ES"),items:b.items,notes:b.notes};y(t.id,r),p.oR.success("Presupuesto actualizado correctamente"),a.push("/budgets")}catch(e){p.oR.error("Error al actualizar el presupuesto")}};return(0,i.jsx)(h.b,{children:(0,i.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(s.$,{variant:"outline",size:"icon",asChild:!0,children:(0,i.jsx)(v(),{href:"/budgets",children:(0,i.jsx)(m.A,{className:"h-4 w-4"})})}),(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Editar Presupuesto"})]}),(0,i.jsx)("form",{onSubmit:j,children:(0,i.jsxs)(l.Zp,{children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(l.ZB,{children:"Detalles del Presupuesto"}),(0,i.jsx)(l.BT,{children:"Modifica los datos del presupuesto"})]}),(0,i.jsxs)(l.Wu,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"client",children:"Cliente"}),(0,i.jsxs)("select",{title:"Select a client",id:"client",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2",value:b.client,onChange:e=>g({...b,client:e.target.value}),required:!0,children:[(0,i.jsx)("option",{value:"",children:"Selecciona un cliente"}),x.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"validUntil",children:"V\xe1lido hasta"}),(0,i.jsx)(r.p,{id:"validUntil",type:"date",value:b.validUntil,onChange:e=>g({...b,validUntil:e.target.value}),required:!0})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(n.J,{children:"Conceptos"}),b.items.map((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,i.jsx)("div",{className:"col-span-6",children:(0,i.jsx)(r.p,{placeholder:"Descripci\xf3n",value:e.description,onChange:e=>{let a=[...b.items];a[t].description=e.target.value,g({...b,items:a})}})}),(0,i.jsx)("div",{className:"col-span-2",children:(0,i.jsx)(r.p,{type:"number",placeholder:"Cantidad",value:e.quantity,onChange:e=>{let a=[...b.items];a[t].quantity=Number(e.target.value),g({...b,items:a})}})}),(0,i.jsx)("div",{className:"col-span-1",children:(0,i.jsx)(r.p,{type:"number",step:"0.01",placeholder:"Precio",value:e.price,onChange:e=>{let a=[...b.items];a[t].price=Number(e.target.value),g({...b,items:a})}})}),(0,i.jsx)("div",{className:"col-span-1",children:(0,i.jsx)(r.p,{type:"number",step:"1",min:"0",max:"100",placeholder:"IVA %",value:e.tax,onChange:e=>{let a=[...b.items];a[t].tax=Number(e.target.value),g({...b,items:a})}})}),(0,i.jsx)("div",{className:"col-span-1 flex items-center",children:(0,i.jsx)(s.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>{let e=b.items.filter((e,a)=>a!==t);g({...b,items:e})},children:"\xd7"})})]},t)),(0,i.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>{let e=Math.max(0,...b.items.map(e=>e.id))+1;g({...b,items:[...b.items,{id:e,description:"",quantity:1,price:0,tax:21}]})},children:"A\xf1adir concepto"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"notes",children:"Notas"}),(0,i.jsx)(d.T,{id:"notes",value:b.notes,onChange:e=>g({...b,notes:e.target.value}),placeholder:"A\xf1ade notas o condiciones adicionales"})]})]}),(0,i.jsx)(l.wL,{children:(0,i.jsx)(s.$,{type:"submit",children:"Guardar Cambios"})})]})})]})})}},17580:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},35169:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,t,a)=>{"use strict";var i=a(18999);a.o(i,"useParams")&&a.d(t,{useParams:function(){return i.useParams}}),a.o(i,"usePathname")&&a.d(t,{usePathname:function(){return i.usePathname}}),a.o(i,"useRouter")&&a.d(t,{useRouter:function(){return i.useRouter}})},40968:(e,t,a)=>{"use strict";a.d(t,{b:()=>n});var i=a(12115),s=a(63655),l=a(95155),r=i.forwardRef((e,t)=>(0,l.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var n=r},57340:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},57434:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},61170:(e,t,a)=>{Promise.resolve().then(a.bind(a,12231))},63655:(e,t,a)=>{"use strict";a.d(t,{hO:()=>d,sG:()=>n});var i=a(12115),s=a(47650),l=a(99708),r=a(95155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let a=i.forwardRef((e,a)=>{let{asChild:i,...s}=e,n=i?l.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(n,{...s,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function d(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},72713:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},82714:(e,t,a)=>{"use strict";a.d(t,{J:()=>c});var i=a(95155),s=a(12115),l=a(40968),r=a(74466),n=a(53999);let d=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(l.b,{ref:t,className:(0,n.cn)(d(),a),...s})});c.displayName=l.b.displayName},89852:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});var i=a(95155),s=a(12115),l=a(53999);let r=s.forwardRef((e,t)=>{let{className:a,type:s,...r}=e;return(0,i.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});r.displayName="Input"},99474:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});var i=a(95155),s=a(12115),l=a(53999);let r=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});r.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[455,874,671,294,441,684,358],()=>t(61170)),_N_E=e.O()}]);
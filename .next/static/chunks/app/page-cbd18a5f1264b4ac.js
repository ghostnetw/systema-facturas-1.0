(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5951:(e,s,t)=>{Promise.resolve().then(t.bind(t,20720))},20720:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Q});var a=t(95155),r=t(97168),l=t(88482),n=t(34964),i=t(19946);let d=(0,i.A)("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);var c=t(57434),o=t(17580);let x=(0,i.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var u=t(6874),m=t.n(u),f=t(42181),h=t(82551),p=t(12115),j=t(46081),v=t(39033),g=t(52712),N=t(63655),y="Avatar",[b,w]=(0,j.A)(y),[R,F]=b(y),Z=p.forwardRef((e,s)=>{let{__scopeAvatar:t,...r}=e,[l,n]=p.useState("idle");return(0,a.jsx)(R,{scope:t,imageLoadingStatus:l,onImageLoadingStatusChange:n,children:(0,a.jsx)(N.sG.span,{...r,ref:s})})});Z.displayName=y;var k="AvatarImage",S=p.forwardRef((e,s)=>{let{__scopeAvatar:t,src:r,onLoadingStatusChange:l=()=>{},...n}=e,i=F(k,t),d=function(e,s){let[t,a]=p.useState("idle");return(0,g.N)(()=>{if(!e){a("error");return}let t=!0,r=new window.Image,l=e=>()=>{t&&a(e)};return a("loading"),r.onload=l("loaded"),r.onerror=l("error"),r.src=e,s&&(r.referrerPolicy=s),()=>{t=!1}},[e,s]),t}(r,n.referrerPolicy),c=(0,v.c)(e=>{l(e),i.onImageLoadingStatusChange(e)});return(0,g.N)(()=>{"idle"!==d&&c(d)},[d,c]),"loaded"===d?(0,a.jsx)(N.sG.img,{...n,ref:s,src:r}):null});S.displayName=k;var A="AvatarFallback",P=p.forwardRef((e,s)=>{let{__scopeAvatar:t,delayMs:r,...l}=e,n=F(A,t),[i,d]=p.useState(void 0===r);return p.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(e)}},[r]),i&&"loaded"!==n.imageLoadingStatus?(0,a.jsx)(N.sG.span,{...l,ref:s}):null});P.displayName=A;var B=t(53999);let C=p.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z,{ref:s,className:(0,B.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});C.displayName=Z.displayName,p.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(S,{ref:s,className:(0,B.cn)("aspect-square h-full w-full",t),...r})}).displayName=S.displayName;let T=p.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(P,{ref:s,className:(0,B.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});T.displayName=P.displayName;var E=t(88145);function W(){let{invoices:e}=(0,f.U)(),s=[...e].sort((e,s)=>{let a=t(e.date);return t(s.date).getTime()-a.getTime()}).slice(0,5);function t(e){let[s,t,a]=e.split("/").map(Number);return new Date(a,t-1,s)}return(0,a.jsxs)("div",{className:"space-y-8",children:[s.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(C,{className:"h-9 w-9 mr-3",children:(0,a.jsx)(T,{className:"bg-gray-100 text-gray-600",children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m(),{href:"/invoices/".concat(e.id),className:"text-sm font-medium leading-none hover:underline",children:e.client}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.amount})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Factura: ",e.id]}),(0,a.jsx)(E.E,{variant:"Pagada"===e.status?"success":"Pendiente"===e.status?"outline":"destructive",className:"Pagada"===e.status?"bg-green-100 text-green-800 hover:bg-green-100":"Pendiente"===e.status?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100":"bg-red-100 text-red-800 hover:bg-red-100",children:e.status})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Emitida: ",e.date]}),(0,a.jsxs)("p",{children:["Vencimiento: ",e.dueDate]})]})]})]},e.id)),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(r.$,{variant:"outline",asChild:!0,children:(0,a.jsx)(m(),{href:"/invoices",children:"Ver todas las facturas"})})})]})}var I="Progress",[L,U]=(0,j.A)(I),[G,M]=L(I),V=p.forwardRef((e,s)=>{var t,r,l,n;let{__scopeProgress:i,value:d=null,max:c,getValueLabel:o=_,...x}=e;(c||0===c)&&!$(c)&&console.error((t="".concat(c),r="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let u=$(c)?c:100;null===d||q(d,u)||console.error((l="".concat(d),n="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(n,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let m=q(d,u)?d:null,f=O(m)?o(m,u):void 0;return(0,a.jsx)(G,{scope:i,value:m,max:u,children:(0,a.jsx)(N.sG.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":O(m)?m:void 0,"aria-valuetext":f,role:"progressbar","data-state":z(m,u),"data-value":null!=m?m:void 0,"data-max":u,...x,ref:s})})});V.displayName=I;var D="ProgressIndicator",X=p.forwardRef((e,s)=>{var t;let{__scopeProgress:r,...l}=e,n=M(D,r);return(0,a.jsx)(N.sG.div,{"data-state":z(n.value,n.max),"data-value":null!==(t=n.value)&&void 0!==t?t:void 0,"data-max":n.max,...l,ref:s})});function _(e,s){return"".concat(Math.round(e/s*100),"%")}function z(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function O(e){return"number"==typeof e}function $(e){return O(e)&&!isNaN(e)&&e>0}function q(e,s){return O(e)&&!isNaN(e)&&e<=s&&e>=0}X.displayName=D;let K=p.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(V,{ref:s,className:(0,B.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(X,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});function H(){let{clients:e,invoices:s}=(0,f.U)(),t=e.map(e=>{let t=s.filter(s=>{var t,a;return(null===(t=s.client)||void 0===t?void 0:t.toString())===(null===(a=e.id)||void 0===a?void 0:a.toString())}),a=t.reduce((e,s)=>e+("string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0),0);return{...e,total:a>0?"€".concat(a.toFixed(2)):"€0.00",percentage:a>0?Math.floor(a/t.length*100/1e3):0,initials:e.name.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase()}}).sort((e,s)=>parseFloat(s.total.replace("€",""))-parseFloat(e.total.replace("€",""))).filter(e=>parseFloat(e.total.replace("€",""))>0).slice(0,5);return(0,a.jsx)("div",{className:"space-y-8",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(C,{className:"h-9 w-9 mr-3",children:(0,a.jsx)(T,{className:"bg-gray-100 text-gray-600",children:e.initials})}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:e.name}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.total})]}),(0,a.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:(0,a.jsxs)("p",{children:["CIF: ",e.cif]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(K,{value:e.percentage,className:"h-2"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.percentage,"%"]})]})]})]},e.id))})}K.displayName=V.displayName;var J=t(77229);function Q(){return(0,a.jsx)(J.b,{children:(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:(0,a.jsx)(Y,{})}),(0,a.jsxs)(n.tU,{defaultValue:"overview",className:"space-y-4",children:[(0,a.jsxs)(n.j7,{children:[(0,a.jsx)(n.Xi,{value:"overview",children:"Resumen"}),(0,a.jsx)(n.Xi,{value:"invoices",children:"Facturas"}),(0,a.jsx)(n.Xi,{value:"clients",children:"Clientes"}),(0,a.jsx)(n.Xi,{value:"reports",children:"Informes"})]}),(0,a.jsxs)(n.av,{value:"overview",className:"space-y-4",children:[(0,a.jsx)(h.G,{}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[(0,a.jsxs)(l.Zp,{className:"lg:col-span-4",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Facturas Recientes"}),(0,a.jsx)(l.BT,{children:"Has emitido 8 facturas este mes"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(W,{})})]}),(0,a.jsxs)(l.Zp,{className:"lg:col-span-3",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Principales Clientes"}),(0,a.jsx)(l.BT,{children:"Por volumen de facturaci\xf3n"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(H,{})})]})]})]}),(0,a.jsx)(n.av,{value:"invoices",className:"space-y-4",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Gesti\xf3n de Facturas"}),(0,a.jsx)(l.BT,{children:"Visualiza, crea y gestiona todas tus facturas"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(r.$,{asChild:!0,children:(0,a.jsx)(m(),{href:"/invoices/new",children:"Nueva Factura"})})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:'Selecciona la pesta\xf1a "Facturas" en el men\xfa principal para gestionar tus facturas.'})]})]})}),(0,a.jsx)(n.av,{value:"clients",className:"space-y-4",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Gesti\xf3n de Clientes"}),(0,a.jsx)(l.BT,{children:"Administra la informaci\xf3n de tus clientes"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(r.$,{asChild:!0,children:(0,a.jsx)(m(),{href:"/clients/new",children:"Nuevo Cliente"})})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:'Selecciona la pesta\xf1a "Clientes" en el men\xfa principal para gestionar tus clientes.'})]})]})}),(0,a.jsx)(n.av,{value:"reports",className:"space-y-4",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Informes y Estad\xedsticas"}),(0,a.jsx)(l.BT,{children:"Visualiza informes detallados de tu actividad"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:'Selecciona la pesta\xf1a "Informes" en el men\xfa principal para acceder a los informes detallados.'})})]})})]})]})})}function Y(){let{invoices:e,clients:s,getTotalBilling:t,getPendingInvoicesCount:r,getActiveClientsCount:n,getQuarterlyVAT:i}=(0,f.U)(),u=e=>"€".concat(e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium",children:"Facturaci\xf3n Total"}),(0,a.jsx)(d,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:u(t())}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:0===e.length?"Sin datos previos":"0% respecto al mes anterior"})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium",children:"Facturas Pendientes"}),(0,a.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:r()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:0===e.length?"Sin datos previos":"0 respecto al mes anterior"})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium",children:"Clientes Activos"}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:n()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:0===s.length?"Sin datos previos":"0 nuevos este mes"})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium",children:"IVA Trimestral"}),(0,a.jsx)(x,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:u(i())}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Periodo actual"})]})]})]})}},34964:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var a=t(95155),r=t(12115),l=t(30064),n=t(53999);let i=l.bL,d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});d.displayName=l.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});c.displayName=l.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});o.displayName=l.UC.displayName},82551:(e,s,t)=>{"use strict";t.d(s,{G:()=>m});var a=t(95155),r=t(88482),l=t(83540),n=t(93774),i=t(96025),d=t(16238),c=t(94517),o=t(17398),x=t(42181),u=t(6740);function m(){let{invoices:e,budgets:s}=(0,x.U)();if((!e||0===e.length)&&(!s||0===s.length))return(0,a.jsx)(r.Zp,{children:(0,a.jsxs)(r.Wu,{className:"p-6 flex flex-col items-center justify-center min-h-[350px]",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-muted-foreground mb-2",children:"No hay datos disponibles"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Los datos de facturaci\xf3n se mostrar\xe1n aqu\xed cuando comiences a crear facturas."})]})});let t=Array.from({length:12},(e,s)=>new Date(2024,s,1).toLocaleString("es-ES",{month:"short"})),m=Object.entries(e.reduce((e,s)=>{let t=new Date(s.date).toLocaleString("es-ES",{month:"short"});t in e||(e[t]=0);let a="string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0;return e[t]+=a,e},Object.fromEntries(t.map(e=>[e,0])))).map(e=>{let[s,t]=e;return{name:s,total:t}}),f=(null==s?void 0:s.length)||0,h=(null==s?void 0:s.filter(e=>"Aceptado"===e.status).length)||0,p=(null==s?void 0:s.filter(e=>"Pendiente"===e.status).length)||0;return(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(r.Zp,{children:(0,a.jsxs)(r.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"Estado de Presupuestos"})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-gray-100 p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:f}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total"})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-green-100 p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-800",children:h}),(0,a.jsx)("div",{className:"text-sm text-green-800",children:"Aceptados"})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-yellow-100 p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:p}),(0,a.jsx)("div",{className:"text-sm text-yellow-800",children:"Pendientes"})]})]})]})}),(0,a.jsx)(r.Zp,{children:(0,a.jsxs)(r.Wu,{className:"p-6",children:[(0,a.jsx)("div",{className:"text-xl font-bold mb-4",children:"Facturaci\xf3n Mensual"}),(0,a.jsx)(l.u,{width:"100%",height:350,children:(0,a.jsxs)(n.E,{data:m,children:[(0,a.jsx)(i.W,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(d.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"€".concat(e)}),(0,a.jsx)(c.m,{formatter:e=>["€".concat(e),"Total"],labelFormatter:e=>"Mes: ".concat(e)}),(0,a.jsx)(o.y,{dataKey:"total",fill:"#4f46e5",radius:[4,4,0,0]})]})})]})})]})}},88145:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(95155);t(12115);var r=t(74466),l=t(53999);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:t}),s),...r})}}},e=>{var s=s=>e(e.s=s);e.O(0,[455,874,235,64,294,441,684,358],()=>s(5951)),_N_E=e.O()}]);
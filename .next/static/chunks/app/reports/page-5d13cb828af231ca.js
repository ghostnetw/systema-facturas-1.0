(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{15873:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var l=t(58081),a=t(55058),d=t(62544),r=t(83427),i=t(5160),n=t(86810),c=t(51999),x=t(18283),o=t(48388);function m(){let{invoices:e,clients:s}=(0,o.U)(),t=(null==e?void 0:e.length)||0,m=(null==e?void 0:e.reduce((e,s)=>e+("string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0),0))||0,h=(null==e?void 0:e.filter(e=>"Pendiente"===e.status))||[],u=h.reduce((e,s)=>e+("string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0),0),j=(null==e?void 0:e.filter(e=>"Pagada"===e.status&&e.date))||[],f=j.length>0?Math.round(j.reduce((e,s)=>{if(!s.date)return e;let t=new Date(s.date);return e+Math.max(0,((s.dueDate?new Date(s.dueDate):new Date).getTime()-t.getTime())/864e5)},0)/j.length):0;return(0,l.jsx)(x.b,{children:(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Informes y Estad\xedsticas"}),(0,l.jsxs)(i.$,{variant:"outline",children:[(0,l.jsx)(a.A,{className:"mr-2 h-4 w-4"}),"Exportar Datos"]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Facturas"}),(0,l.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:t}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Facturas emitidas"})]})]}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium",children:"Facturaci\xf3n Total"}),(0,l.jsx)(r.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold",children:["€",m.toFixed(2)]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total facturado"})]})]}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium",children:"Facturas Pendientes"}),(0,l.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold",children:["€",u.toFixed(2)]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[h.length," facturas sin cobrar"]})]})]}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium",children:"Tiempo Medio de Pago"}),(0,l.jsx)(r.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold",children:[f," d\xedas"]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Promedio de cobro"})]})]})]}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{children:[(0,l.jsx)(n.ZB,{children:"Facturaci\xf3n Mensual"}),(0,l.jsx)(n.BT,{children:"Evoluci\xf3n de la facturaci\xf3n durante el \xfaltimo a\xf1o"})]}),(0,l.jsx)(n.Wu,{children:(0,l.jsx)(c.G,{})})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{children:[(0,l.jsx)(n.ZB,{children:"Facturaci\xf3n por Cliente"}),(0,l.jsx)(n.BT,{children:"Top 5 clientes por volumen de facturaci\xf3n"})]}),(0,l.jsx)(n.Wu,{className:"space-y-8",children:(s||[]).map(s=>({...s,total:(e||[]).filter(e=>{var t,l;return(null===(t=e.client)||void 0===t?void 0:t.toString())===(null===(l=s.id)||void 0===l?void 0:l.toString())}).reduce((e,s)=>e+("string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0),0)})).sort((e,s)=>s.total-e.total).slice(0,5).map(e=>(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]}),(0,l.jsxs)("div",{className:"text-sm font-medium",children:["€",e.total.toFixed(2)]})]},e.id))})]}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{children:[(0,l.jsx)(n.ZB,{children:"Estado de Pagos"}),(0,l.jsx)(n.BT,{children:"Distribuci\xf3n de facturas por estado"})]}),(0,l.jsxs)(n.Wu,{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Facturas Pagadas"}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:[j.length," de ",t," facturas"]})]}),(0,l.jsxs)("div",{className:"text-sm font-medium",children:[t>0?(j.length/t*100).toFixed(1):"0.0","%"]})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Facturas Pendientes"}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:[h.length," de ",t," facturas"]})]}),(0,l.jsxs)("div",{className:"text-sm font-medium",children:[t>0?(h.length/t*100).toFixed(1):"0.0","%"]})]})]})]})]})]})})}},51999:(e,s,t)=>{"use strict";t.d(s,{G:()=>h});var l=t(58081),a=t(86810),d=t(35313),r=t(73234),i=t(99020),n=t(90207),c=t(11716),x=t(35663),o=t(48388),m=t(97938);function h(){let{invoices:e,budgets:s}=(0,o.U)();if((!e||0===e.length)&&(!s||0===s.length))return(0,l.jsx)(a.Zp,{children:(0,l.jsxs)(a.Wu,{className:"p-6 flex flex-col items-center justify-center min-h-[350px]",children:[(0,l.jsx)("div",{className:"text-xl font-bold text-muted-foreground mb-2",children:"No hay datos disponibles"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Los datos de facturaci\xf3n se mostrar\xe1n aqu\xed cuando comiences a crear facturas."})]})});let t=Array.from({length:12},(e,s)=>new Date(2024,s,1).toLocaleString("es-ES",{month:"short"})),h=Object.entries(e.reduce((e,s)=>{let t=new Date(s.date).toLocaleString("es-ES",{month:"short"});t in e||(e[t]=0);let l="string"==typeof s.total?parseFloat(s.total.replace("€","").trim()):s.total||0;return e[t]+=l,e},Object.fromEntries(t.map(e=>[e,0])))).map(e=>{let[s,t]=e;return{name:s,total:t}}),u=(null==s?void 0:s.length)||0,j=(null==s?void 0:s.filter(e=>"Aceptado"===e.status).length)||0,f=(null==s?void 0:s.filter(e=>"Pendiente"===e.status).length)||0;return(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(a.Zp,{children:(0,l.jsxs)(a.Wu,{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(m.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-xl font-bold",children:"Estado de Presupuestos"})]}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 text-center",children:[(0,l.jsxs)("div",{className:"rounded-lg bg-gray-100 p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:u}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Total"})]}),(0,l.jsxs)("div",{className:"rounded-lg bg-green-100 p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-800",children:j}),(0,l.jsx)("div",{className:"text-sm text-green-800",children:"Aceptados"})]}),(0,l.jsxs)("div",{className:"rounded-lg bg-yellow-100 p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:f}),(0,l.jsx)("div",{className:"text-sm text-yellow-800",children:"Pendientes"})]})]})]})}),(0,l.jsx)(a.Zp,{children:(0,l.jsxs)(a.Wu,{className:"p-6",children:[(0,l.jsx)("div",{className:"text-xl font-bold mb-4",children:"Facturaci\xf3n Mensual"}),(0,l.jsx)(d.u,{width:"100%",height:350,children:(0,l.jsxs)(r.E,{data:h,children:[(0,l.jsx)(i.W,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,l.jsx)(n.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"€".concat(e)}),(0,l.jsx)(c.m,{formatter:e=>["€".concat(e),"Total"],labelFormatter:e=>"Mes: ".concat(e)}),(0,l.jsx)(x.y,{dataKey:"total",fill:"#4f46e5",radius:[4,4,0,0]})]})})]})})]})}},55058:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(51018).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},95919:(e,s,t)=>{Promise.resolve().then(t.bind(t,15873))}},e=>{var s=s=>e(e.s=s);e.O(0,[816,950,368,561,497,954,358],()=>s(95919)),_N_E=e.O()}]);